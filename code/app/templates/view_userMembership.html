<!doctype html>
<html lang="en">
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Sportsmitra</title>

  <!-- Bootstrap CSS -->
  <link href="../static/css/animate.css" rel="stylesheet">
  <link rel="stylesheet" href="../static/css/bootstrap.min.css" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="../static/css/style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@latest/dist/tailwind.min.css">
</head>
<body>
<nav class="navbar navbar-expand-md navbar-dark">
    <div class="container"> 
        <!-- Brand --> 
        <a class="navbar-brand mr-auto" href="/"><img src="../static/images/nb.png" alt="Sportsmitra" class = "logo"/></a> 
        
        <!-- Toggler/collapsibe Button -->
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar"> <span class="navbar-toggler-icon"></span> </button>
        <!-- Navbar links -->
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item"> <a class="nav-link" href="/emp_homepage">Home</a> </li>
            <li class="nav-item"> <a class="nav-link" href="/lookup_bookings">View Booking</a> </li>
            <li class="nav-item"> <a class="nav-link" href="/create_bookings">Book Session</a> </li>
            <li class="nav-item"> <a class="nav-link" href="/view_userMembership">MEMBERSHIP</a> </li>
            <li class="nav-item">
              <a class="nav-link" href="#" id="logout">Logout</a>
            </li>
        </ul>
        </div>
    </div>
</nav>
<body>
    
<br>
<br>
<div class="w-full flex items-center justify-center px-4">
    <div class="max-w-md w-full">
      <div class="bg-white p-8 rounded-lg shadow-lg" style="border: 4px solid #df6700;">
        <form class="form-signin" method="POST" name="signin">
          <h1 class="h3 mb-3" style="text-align: center; font-weight: bold;">VIEW USER MEMBERSHIP</h1>
          {{ form.hidden_tag() }}
          <div class="mb-4">
            <img src="../static/images/logo-black.png" style="transform: scale(0.75); display: block; margin: 0;"><br>
            <label class="block text-gray-700 font-bold mb-2" for="username">
              User Email
            </label>
              {{form.userEmail(class_= "shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline", id="username", type="text", placeholder="User Email")}}
            <br>
            
              <button class="btn btn-custom" type="submit" style="margin-top: 5px;">Submit</button>
              <br>
              {% with messages = get_flashed_messages() %}
{% endwith %}
        </form>
      </div>
    </div>
  </div>
</div>
<br>
<br>
{% if member %}
<div class="w-full flex items-center justify-center px-4">
    <div class="max-w-screen-xl">
        <div class="bg-white p-8 rounded-lg shadow-lg" style="border: 5px solid #df6700;">
        <b><h1 class="h3 mb-3 font-weight-normal">MEMBERSHIP INFROMATION</h1></b>
            <div class="table-responsive"></div>
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Profile Picture</th>
                        <th>User Name</th>
                        <th>Membership Type</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <td>Action</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                          <img id="profileImage" src="/static/{{ member.profile_picture }}" alt="Profile Picture" style="border-radius: 50%; object-fit: cover; width: 150px; height: 150px;">
                        </td>
                        
                        <td>{{ member.User }}</td>
                        <td>{{ member.member_type }}</td>
                        <td>{{ member.start_date}}</td>
                        <td>{{ member.end_date }}</td>
                        <td>
                          <form id="cancel-membership-form-{{ member.id }}" action="{{ url_for('cancel_membership', user_id=member.id) }}" method="POST">
                            <button class="btn btn-custom cancel-membership-btn" type="button" data-member-id="{{ member.id }}">Cancel Membership</button>
                          </form>
                        </td>
                    </tr>
                </tbody>
            </table>
        {% elif form_submitted %}
            <b><h1 align = "center" class = "custom-text">User Not A Member!</h1></b>
        {% endif %}
        </div>
    </div>
</div>
</div>
<br>
  <br>
  <footer class="container-fluid">
    <div class="container">
      <div class="row">
        <div class="col-md-3 footer1 d-flex wow bounceInLeft" data-wow-delay=".25s">
          <div class="d-flex flex-wrap align-content-center"> <a href="#"><img src="../static/images/fnb.png" alt="logo" class = "logo"></a>
            <p>Empowering athletes, nurturing talent, fostering 
              teamwork, celebrating <br>
              achievements.</p>
              <p>&copy; 2024 Sportsmitra. <br>All rights reserved.<br> </p>
          </div>
        </div>
        <div class="col-md-3 footer2 wow bounceInUp" data-wow-delay=".25s" id="contact">
          <br>
          <br> 
          <br> 
          <br>
          <br> 
          <br> 
          <br>
          <h5>QUICK LINKS</h5>
          <a href = "/lookup_bookings"> View Sessions</a><br>
          <a href = "/create_bookings">Book Session</a><br>
          
        </div>
        <div class="col-md-3 footer2 wow bounceInUp" data-wow-delay=".25s" id="contact">
          <br>
          <br> 
          <br> 
          <br>
          <br> 
          <br> 
          <br>
          <h5>EXPLORE MORE</h5>
          <a href="https://www.nike.com">
            NIKE
          </a><br>
          <a href="https://www.jdsports.com">
            JD SPORTS
          </a><br>
          <a href = "https://www.sportsdirect.com">
            SPORTS DIRECT
          </a><br>
          <a href = "https://www.adidas.co.uk">
            ADIDAS
          </a><br>
        </div>
        <div class="col-md-3 footer3 wow bounceInRight" data-wow-delay=".25s">
          <h5>ADDRESS</h5>
          <p>koteshwor Kathmandu</p>
          <h5>PHONE</h5>
          <p>9818255262</p>
          <h5>EMAIL</h5>
          <p>sportsmitra@gmail.com</p>
        </div>
      </div>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const cancelMembershipBtns = document.querySelectorAll('.cancel-membership-btn');
  
      cancelMembershipBtns.forEach(function (btn) {
        btn.addEventListener('click', function () {
          const memberId = btn.getAttribute('data-member-id');
  
          // Display SweetAlert confirmation
          Swal.fire({
            title: 'Are you sure?',
            text: 'This action cannot be undone!',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, cancel it!'
          }).then((result) => {
            // If user confirms the action, submit the respective form
            if (result.isConfirmed) {
              const form = document.getElementById(`cancel-membership-form-${memberId}`);
              form.submit();
            }
          });
        });
      });
    });
  </script>


  <script>
    document.getElementById("logout").addEventListener("click", function (e) {
      e.preventDefault(); // Prevents the default link behavior

      Swal.fire({
        title: "Are you sure?",
        text: "Do you want to logout?",
        icon: "warning",
        showCancelButton: true,
        confirmButtonColor: "#3085d6",
        cancelButtonColor: "#d33",
        confirmButtonText: "Yes, logout!",
      }).then((result) => {
        if (result.isConfirmed) {
          // Redirect to logout URL
          window.location.href = "/logout";
        }
      });
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
           
  <script src="../static/javascript/jquery.min.js"></script>
  <script src="../static/javascript/bootstrap.min.js"></script>
  <script src="../static/javascript/parallax.js"></script>
  <script src="../static/javascript/wow.js"></script>
  <script src="../static/javascript/main.js"></script>
    </body>
</html>